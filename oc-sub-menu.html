<link rel="import" href="../polymer/polymer-element.html">

<link rel="import" href="../app-menu/app-menu.html">
<link rel="import" href="../app-menu/app-submenu.html">

<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../iron-icon/iron-icon.html">

<dom-module id="oc-sub-menu">
    <template>
        <style is="custom-style">
            :host {
                --app-menu-color: whitesmoke;
                --primary-color: #e0992f;
                --app-menu-selected-bg-color: #292317;
                --app-menu-background-color: #3d332a;
                --app-menu-border: 1px solid #483f36;
            }

            a {
                color: #fff;
            }

            .sub-content {
                padding-left: 50px;
            }

            .app-menu-item {
                font-size:16px;
                font-weight:400;
            }

            .iron-selected {
                border-left: 4px solid var(--primary-color);
            }
        </style>
        <app-menu>
            <template is="dom-repeat" items="{{menus}}">
                <!-- Enter here if nav item has sub menus -->
                <template is="dom-if" if="[[_menuHasSubMenus(item.subMenus)]]">
                    <app-submenu>
                        <div class="app-menu-item" slot="submenu-trigger">
                            <app-menu-icon-item>
                                <iron-icon icon="[[item.icon]]" style="padding-right: 10px"></iron-icon>
                                [[item.name]]
                            </app-menu-icon-item>
                            <iron-icon icon="expand-more" class="expand-icon"></iron-icon>
                        </div>
                        <app-menu slot="submenu-content">
                            <template is="dom-repeat" items="{{item.subMenus}}" as="subMenu">
                                <a class="app-menu-item sub-content" href="[[rootPath]][[subMenu.href]]">[[subMenu.name]]</a>
                            </template>
                        </app-menu>
                    </app-submenu>
                </template>

                <template is="dom-if" if="[[!_menuHasSubMenus(item.subMenus)]]">
                    <a class="app-menu-item" href="[[rootPath]][[item.href]]">
                        <app-menu-icon-item>
                            <iron-icon icon="[[item.icon]]" style="padding-right: 10px"></iron-icon>
                            [[item.name]]
                        </app-menu-icon-item>
                    </a>
                </template>
            </template>
        </app-menu>
    </template>
    <script>
        class OcSubMenu extends Polymer.Element {
            static get is() {
                return 'oc-sub-menu';
            }

            static get properties() {
                return {
                    /* Example of the menus property
                      {
                        name: "Orders",
                        icon: "icons:shopping-cart" // Optional
                        href: "url" // This is only needed if there is no submenus
                        subMenus: [
                            {
                                href: "orders/active",
                                name: "Active",
                            },
                            {
                                href: "orders/all",
                                name: "All",
                            },
                        ],
                    },*/
					menus: {
						type: Array,
						value: [],
					},
				};
			}

			_menuHasSubMenus(subMenus) {
				return subMenus && subMenus.length !== -1;
			}
		}

		window.customElements.define(OcSubMenu.is, OcSubMenu);
    </script>
</dom-module>

